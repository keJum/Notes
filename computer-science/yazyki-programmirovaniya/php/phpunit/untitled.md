---
description: –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å—ã –≤ –∏–∑–æ–ª—è—Ü–∏–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
---

# üë®üèª‚Äçüíª üêò üß™ PHPUnit: Mock –æ–±—ä–µ–∫—Ç—ã

 –í –∫–∞—á–µ—Å—Ç–≤–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –≤–æ–∑—å–º–µ–º —Å–ª–µ–¥—É—é—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞:

```php
class MyClass {
    protected function showWord($word) { /* –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ –Ω–∞ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ */ }
    protected function getTemperature() { /* –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –¥–∞—Ç—á–∏–∫—É —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã */ }
    public getWord($temparature) {
        $temperature = (int)$temparature;
        if ($temperature < 15) { return 'cold'; }
        if ($temperature > 25) { return 'hot'; }
        return 'warm';
    }
    public function process() {
        $temperature = $this->getTemperature();
        $word = $this->getWord($temperature);
        $this->showWord($word);
    }
}
```

–í –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏–∫–∏ –º—ã –º–æ–∂–µ–º –æ—Ç–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞, –ø–æ–¥–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫–∞–º–∏ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –Ω–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º, –∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ –º–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–µ –ø–æ—Ç–æ–º–∫–∞. –ü—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫ –∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã Mock –æ–±—ä–µ–∫—Ç—ã –≤ PHPUnit, –≥–¥–µ –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É–¥–æ–±—Å—Ç–≤–æ –≤ –≤–∏–¥–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ API.

## –ü–æ–ª—É—á–µ–Ω–∏–µ Mock –æ–±—ä–µ–∫—Ç–∞

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Mock –æ–±—ä–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ getMock\(\):

```php
class MyClassTest extends PHPUnit_Framework_TestCase {
    public function test_process() {
        $mock = $this->getMock('MyClass');

        // –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ $mock –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ MyClass
        $this->assertInstanceOf('MyClass', $mock);
    }
}
```

–ö–∞–∫ –≤–∏–¥–∏—Ç–µ, –ø–æ–ª—É—á–∏—Ç—å –Ω—É–∂–Ω—ã–π –Ω–∞–º Mock –æ–±—ä–µ–∫—Ç –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ. –ü–æ-—É–º–æ–ª—á–∞–Ω–∏—é, –≤—Å–µ –º–µ—Ç–æ–¥—ã –≤ –Ω–µ–º –±—É–¥—É—Ç –ø–æ–¥–º–µ–Ω–µ–Ω—ã –∑–∞–≥–ª—É—à–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—é—Ç –∏ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç null.

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–∑–æ–≤–∞ getMock

```php
public function getMock(
    $originalClassName, // –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω Mock –æ–±—ä–µ–∫—Ç
    $methods = array(), // –≤ —ç—Ç–æ–º –º–∞—Å—Å–∏–≤–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –º–µ—Ç–æ–¥—ã –±—É–¥—É—Ç –ø–æ–¥–º–µ–Ω–µ–Ω—ã
    array $arguments = array(), // –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
    $mockClassName = '', // –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏–º—è Mock –∫–ª–∞—Å—Å–∞
    $callOriginalConstructor = true, // –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ __construct()
    $callOriginalClone = true, // –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ __clone()
    $callAutoload = true // –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ __autoload()
);
```

–ü–µ—Ä–µ–¥–∞—á–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—é getMock\(\) –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∑–Ω–∞—á–µ–Ω–∏—è null –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω Mock –æ–±—ä–µ–∫—Ç –≤–æ–æ–±—â–µ –±–µ–∑ –ø–æ–¥–º–µ–Ω.

### getMockBuilder

 –î–ª—è —Ç–µ—Ö, –∫–æ–º—É –ø—Ä–∏—è—Ç–Ω–µ–µ –ø–∏—Å–∞—Ç—å –≤ —Ü–µ–ø–Ω–æ–º —Å—Ç–∏–ª–µ, PHPUnit –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—â–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:

```php
$mock = $this->getMockBuilder('MyClass')
    ->setMethods(null)
    ->setConstructorArgs(array())
    ->setMockClassName('')
    // –æ—Ç–∫–ª—é—á–∏–≤ –≤—ã–∑–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å Mock –æ–±—ä–µ–∫—Ç "–æ–¥–∏–Ω–æ—á–∫–∏"
    ->disableOriginalConstructor()
    ->disableOriginalClone()
    ->disableAutoload()
    ->getMock();
```

 –¶–µ–ø–æ—á–∫–∞ –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å –º–µ—Ç–æ–¥–∞ getMockBuilder\(\) –∏ –∑–∞–∫–∞—á–∏–≤–∞—Ç—å—Å—è –º–µ—Ç–æ–¥–æ–º getMock\(\) ‚Äî —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–≤–µ–Ω—å—è —Ü–µ–ø–∏, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è Mock –æ–±—ä–µ–∫—Ç–æ–≤

* getMockFromWsdl\(\) ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å Mock –æ–±—ä–µ–∫—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏—è –∏–∑ [WSDL](http://ru.wikipedia.org/wiki/WSDL);
* getMockClass\(\) ‚Äî —Å–æ–∑–¥–∞–µ—Ç Mock –∫–ª–∞—Å—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏;
* getMockForAbstractClass\(\) ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Mock –æ–±—ä–µ–∫—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø–æ–¥–º–µ–Ω–µ–Ω—ã –≤—Å–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã.

 –í—Å–µ —ç—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ ‚Äî —Å–∫–∞–∂–µ—Ç–µ –≤—ã, –Ω–æ —á—Ç–æ –∂–µ –¥–∞–ª—å—à–µ? –í –æ—Ç–≤–µ—Ç —Å–∫–∞–∂—É, —á—Ç–æ –º—ã –∫–∞–∫ —Ä–∞–∑ –ø–æ–¥–æ—à–ª–∏ –∫ —Å–∞–º–æ–º—É –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–º—É.

## –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞

 PHPUnit –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤ –ø–æ–¥–º–µ–Ω–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è expects\(\) —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω—É–∂–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ method\(\). –í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –æ–±—Ä–∞—Ç–∏–º—Å—è –∫ –∫–ª–∞—Å—Å—É, –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º—É –≤ –Ω–∞—á–∞–ª–µ —Å—Ç–∞—Ç—å–∏, –∏ –Ω–∞–ø–∏—à–µ–º –¥–ª—è –Ω–µ–≥–æ –≤–æ—Ç —Ç–∞–∫–æ–π —Ç–µ—Å—Ç:

```php
public function test_process() {
    $mock = $this->getMock('MyClass', array('getTemperature', 'getWord', 'showWord'));
    $mock->expects($this->once())->method('getTemperature');
    $mock->expects($this->once())->method('showWord');
    $mock->expects($this->once())->method('getWord');
    $mock->process();
}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞ –±—É–¥–µ—Ç —É—Å–ø–µ—à–Ω—ã–º, –µ—Å–ª–∏ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ process\(\) –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤ —Ç—Ä–µ—Ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤: getTemperature\(\), getWord\(\), showWord\(\). –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ —Ç–µ—Å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∑–æ–≤–∞ getWord\(\) —Å—Ç–æ–∏—Ç –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–∑–æ–≤–∞ showWord\(\), —Ö–æ—Ç—è –≤ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–º –º–µ—Ç–æ–¥–µ –Ω–∞–æ–±–æ—Ä–æ—Ç. 

–î–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–æ—Ä—è–¥–∫–∞ –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–æ–≤ –≤ PHPUnit –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è ‚Äî at\(\). –ü–æ–ø—Ä–∞–≤–∏–º –Ω–µ–º–Ω–æ–≥–æ –∫–æ–¥ –Ω–∞—à–µ–≥–æ —Ç–µ—Å—Ç–∞ —Ç–∞–∫ —á—Ç–æ–±—ã PHPUnit –ø—Ä–æ–≤–µ—Ä–∏–ª –∑–∞–æ–¥–Ω–æ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–æ–≤:

```php
public function test_process() {
    $mock = $this->getMock('MyClass', array('getTemperature', 'getWord', 'showWord'));
    $mock->expects($this->at(0))->method('getTemperature');
    $mock->expects($this->at(2))->method('showWord');
    $mock->expects($this->at(1))->method('getWord');
    $mock->process();
}
```

–ü–æ–º–∏–º–æ —É–ø–æ–º—è–Ω—É—Ç—ã—Ö once\(\) –∏ at\(\) –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–∂–∏–¥–∞–Ω–∏–π –≤—ã–∑–æ–≤–æ–≤ –≤ PHPUnit –µ—Å—Ç—å —Ç–∞–∫–∂–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: any\(\), never\(\), atLeastOnce\(\) –∏ exactly\($count\).

## –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ú—ã –º–æ–∂–µ–º –∑–∞—Å—Ç–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π –Ω–∞—Å –º–µ—Ç–æ–¥ –≤–µ—Ä–Ω—É—Ç—å –ª—é–±–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∫–æ–π –∑–∞—Ö–æ—Ç–∏–º –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ—Å—Ç—Ä—É–∫—Ü–∏–∏ will\(\).

```php
/**
 * @dataProvider provider_process
 */
public function test_process($temperature) {
    $mock = $this->getMock('MyClass', array('getTemperature', 'getWord', 'showWord'));

    // –º–µ—Ç–æ–¥ getTemperature() –≤–µ—Ä–Ω–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ $temperature
    $mock->expects($this->once())->method('getTemperature')->will($this->returnValue($temperature));

    $mock->process();
}

public static function provider_process() {
    return array(
        'cold' => array(10),
        'warm' => array(20),
        'hot' => array(30),
    );
}
```

–û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –¥–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞—à —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –∫–ª–∞—Å—Å. PHPUnit –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å will\(\) —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

* returnValue\($value\) ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç $value;
* returnArgument\($index\) ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç —Å –Ω–æ–º–µ—Ä–æ–º $index, —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞;
* returnSelf\(\) ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–∞–º–æ–≥–æ —Å–µ–±—è, –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–ø–æ—á–µ—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤;
* returnValueMap\($map\) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –Ω–∞–±–æ—Ä–æ–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤;
* returnCallback\($callback\) ‚Äî –ø–µ—Ä–µ–¥–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç;
* onConsecutiveCalls\(\) ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–∏–Ω –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–ª–µ–¥—É—é—â–µ–º –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞;
* throwException\($exception\) ‚Äî –±—Ä–æ—Å–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

–ï—â–µ –æ–¥–Ω–æ–π –ø–æ–ª–µ–∑–Ω–æ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é Mock –æ–±—ä–µ–∫—Ç–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –ø–æ–¥–º–µ–Ω–µ–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞, –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ with\(\):

```php
public function test_with_and_will_usage() {
    $mock = $this->getMock('MyClass', array('getWord'));
    $mock->expects($this->once())
        ->method('getWord')
        ->with($this->greaterThan(25))
        ->will($this->returnValue('hot'));
    $this->assertEquals('hot', $mock->getWord(30));
}
```

–í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ with\(\) –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤—Å–µ —Ç–µ –∂–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, —á—Ç–æ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ assertThat\(\), –ø–æ—ç—Ç–æ–º—É –∑–¥–µ—Å—å —è –ø—Ä–∏–≤–µ–¥—É –ª–∏—à—å —Å–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –±–µ–∑ –∏—Ö –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è:

* attribute\(\)
* anything\(\)
* arrayHasKey\(\)
* contains\(\)
* equalTo\(\)
* attributeEqualTo\(\)
* fileExists\(\)
* greaterThan\(\)
* greaterThanOrEqual\(\)
* classHasAttribute\(\)
* classHasStaticAttribute\(\)
* hasAttribute\(\)
* identicalTo\(\)
* isFalse\(\)
* isInstanceOf\(\)
* isNull\(\)
* isTrue\(\)
* isType\(\)
* lessThan\(\)
* lessThanOrEqual\(\)
* matchesRegularExpression\(\)
* stringContains\(\)

 –í—Å–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π logicalAnd\(\), logicalOr\(\), logicalNot\(\) –∏ logicalXor\(\):

```php
$mock->expects($this->once())
    ->method('getWord')
    ->with($this->logicalAnd($this->greaterThanOrEqual(15), $this->lessThanOrEqual(25)))
    ->will($this->returnValue('warm'));
```

## –ü–æ–¥–º–µ–Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤

–ù–∞—á–∏–Ω–∞—è —Å PHPUnit –≤–µ—Ä—Å–∏–∏ 3.5 —Å—Ç–∞–ª–∞ –≤–æ–∑–º–æ–∂–Ω–æ–π –ø–æ–¥–º–µ–Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ staticExpects\(\):

```php
$class = $this->getMockClass('SomeClass');

// —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ PHP –≤–µ—Ä—Å–∏–∏ 5.3 –∏ –≤—ã—à–µ
// –≤ –±–æ–ª–µ–µ —Ä–∞–Ω–Ω–∏—Ö –≤–µ—Ä—Å–∏—è—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å call_user_func_array()
$class::staticExpects($this->once())->method('someStaticMethod');
$class::someStaticMethod();
```

–ß—Ç–æ–±—ã —ç—Ç–æ –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏–µ –∏–º–µ–ª–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ, –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –≤–Ω—É—Ç—Ä–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –∫–ª–∞—Å—Å–∞ –≤—ã–∑–æ–≤ –ø–æ–¥–º–µ–Ω—è–µ–º–æ–≥–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª –æ–¥–Ω–∏–º –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –Ω–∏–∂–µ —Å–ø–æ—Å–æ–±–æ–≤:

* $this-&gt;staticMethod\(\) ‚Äî –∏–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤;
* static::staticMethod\(\) ‚Äî –∏–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤.

 –ò–∑-–∑–∞ [–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π self](http://ru.php.net/manual/en/language.oop5.late-static-bindings.php#language.oop5.late-static-bindings.self) –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–¥–º–µ–Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤, –≤—ã–∑—ã–≤–∞–µ–º—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ —Ç–∞–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º:

```php
self::staticMethod();
```

## –°–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã:

{% embed url="https://habr.com/ru/post/140217/" %}



